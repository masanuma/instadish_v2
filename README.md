# InstaDish Pro

**飲食店専用AI画像加工サービス**

料理写真をAIで美味しそうに加工し、SNS投稿用のキャプションとハッシュタグを自動生成するWebアプリケーションです。

## ✅ 現在実装済みの主な機能

1. **AI画像加工**
   - 料理写真をアップロードし、AIで美味しそうに自動加工
   - 明度・彩度・コントラストの最適化（デモ版は模擬実装）

2. **AIキャプション自動生成**
   - 画像内容や店舗説明文・写真をもとにSNS投稿用キャプションを自動生成
   - 料理の種類を自動認識し、最適な文章を生成
   - **固定キャプション**はAI生成キャプションの最後に必ず追記

3. **ハッシュタグ自動提案**
   - 人気・効果的なハッシュタグを自動で提案
   - インスタ映えを狙ったタグの組み合わせ
   - **固定ハッシュタグ**はAI生成ハッシュタグの最後に必ず記載
   - **ハッシュタグは1つずつ改行して表示**

4. **コンテンツ管理**
   - 生成キャプション・ハッシュタグのワンクリックコピー
   - SNS（Twitter/X等）への直接シェア機能
   - **キャプション・ハッシュタグはユーザーがプロンプト入力でAI再生成可能**

5. **処理履歴管理**
   - 過去の画像処理結果を最大50件まで保存
   - 履歴から過去のコンテンツを再利用可能
   - ローカルストレージによるデータ永続化

6. **店舗情報管理**
   - 店舗ごとの説明文・写真を管理
   - 店舗情報をもとにAIキャプション・ハッシュタグ生成

7. **サブスクリプション決済・管理**
   - Stripeによる月額課金・無料期間管理
   - 管理者によるユーザー管理（無料期間延長・権限変更など）

8. **画面UI・UX**
   - 画像アップロード・加工エリアとSNS投稿用コンテンツ表示エリア
   - 処理履歴のモーダル表示、個別削除・一括削除

9. **技術基盤**
   - Next.js 14（App Router）、TypeScript、Tailwind CSS
   - Railwayによる本番デプロイ
   - React Hooksによる状態管理
   - Supabaseによるデータ管理

## 🚀 主な機能

### ✨ AI画像加工
- 料理写真をアップロードして自動で美味しそうに加工
- 明度、彩度、コントラストの最適化（デモ版では模擬実装）

### 📝 キャプション自動生成
- 画像内容に基づいた魅力的なSNS投稿用キャプションを自動作成
- 料理の種類を自動認識して適切な文章を生成

### #️⃣ ハッシュタグ提案
- 効果的で人気のハッシュタグを自動で提案
- インスタ映えを狙った最適なタグの組み合わせ

### 📋 コンテンツ管理
- 生成されたキャプションとハッシュタグのワンクリックコピー
- Twitter/X等のSNSへの直接シェア機能

### 📚 処理履歴管理
- 過去の画像処理結果を最大50件まで保存
- 履歴から過去のコンテンツを再利用可能
- ローカルストレージを使用したデータ永続化

## 🛠️ 技術スタック

- **フレームワーク**: Next.js 14 (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **デプロイ**: Railway
- **状態管理**: React Hooks
- **データ保存**: Local Storage

## 📦 インストール

```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev

# プロダクションビルド
npm run build

# プロダクションサーバーの起動
npm start
```

## 🎯 使用方法

1. **画像アップロード**
   - メイン画面で「画像を選択」ボタンをクリック
   - 料理の写真を選択してアップロード

2. **AI処理実行**
   - 「AI加工・キャプション生成」ボタンをクリック
   - 数秒でAI処理が完了し、結果が表示されます

3. **コンテンツ活用**
   - 生成されたキャプションとハッシュタグを編集可能
   - 「コンテンツをコピー」でクリップボードにコピー
   - 「SNSでシェア」で直接SNSに投稿

4. **履歴管理**
   - 右上の「履歴」ボタンで過去の処理結果を確認
   - 履歴から任意の項目を選択して再利用

## 🎨 画面構成

### メイン画面
- 画像アップロード・加工エリア（左側）
- SNS投稿用コンテンツ表示エリア（右側）
- 機能説明セクション（下部）

### 履歴モーダル
- 処理済み画像の一覧表示
- 日時、料理タイプでの識別
- 個別削除・一括削除機能

## 🔧 設定・カスタマイズ

### AI処理のカスタマイズ
現在はデモ版として模擬データを使用していますが、以下の箇所で実際のAI APIと連携可能です：

- `src/app/api/process-image/route.ts` - 画像処理API
- `enhanceImageForDemo()` - 画像加工処理
- `estimateFoodType()` - 料理タイプ判定
- `generateCaption()` - キャプション生成
- `generateHashtags()` - ハッシュタグ生成

### 外部AI API連携例
```typescript
// OpenAI Vision API、Google Cloud Vision、AWS Rekognition などと連携
const response = await fetch('YOUR_AI_API_ENDPOINT', {
  method: 'POST',
  headers: { 'Authorization': 'Bearer YOUR_API_KEY' },
  body: JSON.stringify({ image: imageBase64 })
});
```

## 🚀 デプロイ

### Railway（推奨）
```bash
# Railway CLI をインストール
npm install -g @railway/cli

# デプロイ
railway deploy
```

### Vercel
```bash
# Vercel CLI をインストール
npm install -g vercel

# デプロイ
vercel
```

## 📋 環境変数

実際のAI APIを使用する場合は、以下の環境変数を設定してください：

```env
# AI API設定
AI_API_KEY=your_ai_api_key
AI_API_ENDPOINT=https://api.your-ai-service.com

# その他の設定
NEXT_PUBLIC_APP_URL=https://your-app-domain.com
```

## 🔄 今後の機能拡張ロードマップ

1. **AI安定化・高速化**
   - AI画像処理の精度・速度向上
   - サーバー負荷分散やリトライ処理の強化

2. **アカウント作成機能（ユーザー登録）**
   - ユーザー自身によるアカウント作成・管理
   - メール認証やパスワードリセット対応

3. **アカウント管理機能（管理者用）**
   - 管理者によるユーザー管理（無料期間延長・権限変更など）
   - サブスクリプション管理

4. **SNS連携機能**
   - InstagramやX（Twitter）等への直接投稿API連携
   - 投稿予約・スケジューリング

5. **ウォークスルー・チュートリアル機能**
   - 初回利用時のガイド表示
   - 操作説明やヒントのポップアップ

6. **画像一括アップロード・一括AI処理**
   - 複数画像をまとめてアップロード＆AI処理

7. **多言語対応**
   - 英語・中国語などへのUI・キャプション自動翻訳

8. **投稿分析・レポート機能**
   - SNS投稿後の反応（いいね数・コメント数など）を可視化

9. **カスタムハッシュタグ管理**
   - 店舗ごとに推奨タグを登録・自動付与

10. **通知機能（メール/LINE等）**
    - AI処理完了やサブスク更新などを通知

---

## 🤝 貢献

プルリクエストや Issue の投稿を歓迎します。大きな変更を行う場合は、まず Issue を作成して議論してください。

## 📄 ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。

## 📞 サポート

ご質問やサポートが必要な場合は、GitHub Issues をご利用ください。

---

**InstaDish Pro** - あなたの料理写真を最高の投稿に変換します 🍽️✨ 

## 🛠️ 技術情報・外部サービス

- **サブスク決済サービス**: Stripe
  - `@stripe/stripe-js`（フロント）と`stripe`（サーバー）パッケージを利用
  - APIキーはRailwayの環境変数で安全に管理
  - `src/lib/stripe.ts`でAPI連携
- **データベース・認証**: Supabase
- **AI画像・キャプション生成**: OpenAI API
- **デプロイ**: Railway

## 🔑 API関連のキー一覧（環境変数）

- **Supabase**
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  - `SUPABASE_SERVICE_ROLE_KEY`
- **Stripe**
  - `STRIPE_SECRET_KEY`
  - `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`
  - `STRIPE_WEBHOOK_SECRET`
- **OpenAI**
  - `OPENAI_API_KEY`
- **JWT**
  - `JWT_SECRET`

※ すべて`.env`またはRailwayの環境変数で管理し、`.env.example`で変数名をチーム共有 

---

## 📝 進捗メモ（2024-07-01）

### 本日の進捗まとめ
- 「AI安定化・高速化」機能の設計・実装（ローカルキャッシュ、リトライ、重複排除、エラーハンドリング）
- 各機能の個別テスト・動作確認
- 総合テストの主要シナリオ（正常系・一部異常系）の途中まで実施

### 明日の作業予定・ToDoリスト
1. 総合テストの続き（異常系・境界値・複数ユーザー同時アクセスなどの網羅的チェック）
2. ログ出力やキャッシュファイルのクリーンアップ動作の最終確認
3. 必要に応じた微調整・リファクタリング
4. テスト結果のご報告・ご確認依頼
5. 本番反映（ご指示があれば） 